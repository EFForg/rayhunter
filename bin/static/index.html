<html>
<head>
    <title>rayhunter</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="js/main.js"></script>
    <script>
        async function repeatedlyPopulate() {
            await populateDivs();
            setTimeout(repeatedlyPopulate, 1000);
        }
        window.onload = function() {
            repeatedlyPopulate();
        }
        window.onload = function() {
            repeatedlyPopulate();
            // Initialize telemetry UI in the settings section
            const settingsSection = document.getElementById('settings-section');
            window.telemetry.createTelemetryUI(settingsSection);
        }
    </script>
</head>
<body>
    <div>
        <button onclick="startRecording()">Start Recording</button>
        <button onclick="stopRecording()">Stop Recording</button>
    </div>
    <table id="qmdl-manifest-table">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Date Started</th>
                <th scope="col">Date of Last Message</th>
                <th scope="col">Size (bytes)</th>
                <th scope="col">PCAP</th>
                <th scope="col">QMDL</th>
                <th scope="col">Analysis Result</th>
            </tr>
        </thead>
    </table>
    <div>
        <h3>Live System stats</h3>
        <pre id="system-stats">Loading...</pre>
    </div>
    <div>
        <h3>Analysis Report of Current Capture</h3>
        <pre id="analysis-report">Loading...</pre>
    </div>
    <div>
        <h3>Settings</h3>
        <div id="settings-section"></div>
        <!-- Telemetry UI will be injected here -->
    </div>
</body>
</html>
